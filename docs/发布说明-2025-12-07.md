# 发布说明（2025-12-07）

## 背景
- 一次集中迭代，目标包括笔记编辑体验、协作与质量保障。

## 后端改动
- comments / notifications / versions 模块迭代：补充控制器、服务与 Schema，支持评论、通知、版本记录。
- 新增 common 过滤器/拦截器：ApiExceptionFilter、ApiEnvelopeInterceptor、IdempotencyInterceptor。
- 新增 semantic、rum 模块：提供语义检索与 RUM 数据采集基础能力。
- 更新 `openapi.yaml`，新增压力脚本 `scripts/stress-notes.ts`。
- 配置与入口调整：`app.module.ts`、`main.ts` 等。

## 前端改动
- 仪表盘：新增 `activity`、`notifications` 页面与导航优化；`src/app/dashboard/layout.tsx` UI 提升。
- 编辑器：`MarkdownEditor` 增强（`react-markdown` + `rehype-sanitize` + 代码高亮）；`TiptapEditor` 与扩展 `CommentMark`、`OutlinePanel`、`TiptapToolbar`。
- 体验与监控：新增 `RUMClient`，分页组件 `pagination.tsx` 与 `usePaginationSync`，统一样式 `editor-tokens.css`。
- 质量与工具：引入测试（`__tests__`）、`jest.config.js`、Lighthouse 配置与报告（`.lighthouseci`）、脚本 `check-i18n.mjs`、`check-test-cases.mjs`。

## 兼容性与配置
- 前端接口地址通过 `NEXT_PUBLIC_API_URL` 配置，默认 `http://localhost:3001/api`（见 `notes-frontend/src/lib/api.ts:20`）。
- Next.js 14 开发态的样式警告（混用 `background` / `backgroundColor`）已记录，后续收敛内联样式以降低冲突提示。

## 风险与回滚
- 无破坏性变更；如需回滚，切换到前一提交或 `revert` 此次提交。

## 验收要点
- Markdown / Tiptap 编辑与预览正常，评论标注与侧栏可用。
- 仪表盘导航与通知 / 活动页面加载正常。
- 后端模块 API 基本路径响应 2xx；压测脚本可运行。

